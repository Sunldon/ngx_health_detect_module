ngx_module_name="ngx_health_detect_api_module \
                 ngx_http_health_detect_module \
                 ngx_stream_health_detect_module "
ngx_module_deps="$ngx_addon_dir/ngx_http_health_detect_module.h \
                  $ngx_addon_dir/ngx_stream_health_detect_module.h \
                  $ngx_addon_dir/ngx_health_detect_common.h  \
                  $ngx_addon_dir/ngx_health_detect_utils.h \
                  $ngx_addon_dir/cJSON.h "
ngx_module_srcs="$ngx_addon_dir/ngx_health_detect_api.c \
                 $ngx_addon_dir/ngx_http_health_detect_module.c \
                 $ngx_addon_dir/ngx_stream_health_detect_module.c \
                 $ngx_addon_dir/ngx_health_detect_utils.c \
                 $ngx_addon_dir/cJSON.c \
                 $ngx_addon_dir/ngx_health_detect_common.c "
ngx_module_libs="-lm"

if [ "$ngx_module_link" = DYNAMIC ]; then
  echo "[ERROR] ngx_health_detect_module do not support dynamic loading yet. Use --add-module."
  exit 1
fi

. auto/module

ngx_addon_name=ngx_health_detect_module
